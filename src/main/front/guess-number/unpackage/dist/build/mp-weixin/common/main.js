(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"11c1":function(t,e,n){"use strict";n.r(e);var o=n("aef8"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},"1fde":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("66fd"));function a(t){return t&&t.__esModule?t:{default:t}}var r={onLaunch:function(){t.getSystemInfo({success:function(t){o.default.prototype.StatusBar=t.statusBarHeight,o.default.prototype.CustomBar=t.statusBarHeight+45,console.log("mp-qq"+o.default.prototype.CustomBar+" "+o.default.prototype.StatusBar),o.default.prototype.StatusBar=t.statusBarHeight,o.default.prototype.CustomBar=t.statusBarHeight+45,console.log("mp-qq"+o.default.prototype.CustomBar+" "+o.default.prototype.StatusBar),o.default.prototype.StatusBar=t.statusBarHeight;var e=wx.getMenuButtonBoundingClientRect();o.default.prototype.Custom=e,o.default.prototype.CustomBar=e.bottom+e.top-t.statusBarHeight,console.log("mp-weixin"+o.default.prototype.CustomBar+" "+o.default.prototype.StatusBar)}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};e.default=r}).call(this,n("543d")["default"])},"2da9":function(t,e,n){},"5d6b":function(t,e,n){"use strict";n.r(e);var o=n("f76f"),a=n("dc12");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var u=n("2877"),i=Object(u["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=i.exports},"643f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},"68e9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={computed:(0,o.mapState)(["islogin","openid","username","auth","urlpath"]),data:function(){return{modalName:null,isLoginning:!1}},methods:a({},(0,o.mapMutations)(["authok","loginname","loginopenid","login"]),{toLogin:function(){var t=this;this.isLoginning=!0,wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?(t.authok(),wx.getUserInfo({success:function(e){var n=e.userInfo.nickName;wx.login({success:function(e){if(e.code){var o="http://"+t.urlpath+":8800/guessNumber";wx.request({url:o,data:{code:e.code},success:function(e){console.log("用户的openid:"+e.data),t.loginname(n),t.loginopenid(e.data),t.login(),t.isLoginning=!1}})}}})}})):wx.openSetting({success:function(e){wx.getSetting({success:function(n){console.log(n),e.authSetting["scope.userInfo"]&&t.authok()}})}})}})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null}})};e.default=u},"774e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),a=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,o,a,r,u){try{var i=t[r](u),s=i.value}catch(c){return void n(c)}i.done?e(s):Promise.resolve(s).then(o,a)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var r=t.apply(e,n);function i(t){u(r,o,a,i,s,"next",t)}function s(t){u(r,o,a,i,s,"throw",t)}i(void 0)})}}var s={computed:(0,a.mapState)(["islogin","openid","username","auth","urlpath"]),data:function(){return{is_open_socket:!1,socketTask:null,is_init:!0,is_matching:!1,is_matched:!1,is_round:!1,modalName:null,resdata:null,result:50,otherUsername:"旗鼓相当的对手",otherUserOpenId:-1,otheruserscore:0,mya:-1,myb:101,myina:-1,myinb:101,othera:101,otherb:-1}},onLoad:function(){},mounted:function(){console.log("mounted"),this.connectSocket()},beforeDestroy:function(){this.closeSocket()},methods:{connectSocket:function(){var e=this,n="ws://"+this.urlpath+":8800/guessNumber";this.socketTask=t.connectSocket({url:n,success:function(t){console.log("websocket连接成功")}});var a=this,r='login={"openid":"'+this.openid+'","nickname":"'+this.username+'"}';this.socketTask.onOpen(function(t){console.log("WebSocket连接正常打开中..."),e.is_open_socket=!0,e.socketTask.send({data:r,success:function(){var t=i(o.default.mark(function t(){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("连接建立成功...");case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),e.socketTask.onMessage(function(t){if(console.log("收到服务器消息"),"loginok"==t.data);else if("win"==t.data||"lose"==t.data||"error"==t.data)"error"==t.data&&(a.modalName="error"),a.modalName=t.data,a.is_init=!0,a.is_matching=!1,a.is_matched=!1,a.is_round=!1,a.mya=-1,a.myb=101,a.othera=101,a.otherb=-1,a.otherUsername="旗鼓相当的对手",a.otherUserOpenId=-1,a.otheruserscore=0,a.otherUserOpenId=-1;else{a.resdata=t.data;var e=JSON.parse(a.resdata);console.log(e),1==e.code?(console.log(e),a.modalName="Image",a.is_matching=!1,a.is_matched=!0,a.result=e.res,a.otherUserOpenId=e.openid,a.otherUsername=e.nickname,a.otheruserscore=e.score,a.otherUserOpenId<a.openid&&(a.is_round=!0)):2==e.code&&(a.is_round=!0,a.othera=e.numbera,a.otherb=e.numberb)}})}),this.socketTask.onClose(function(){console.log("已经被关闭了")})},closeSocket:function(){this.socketTask.close({success:function(t){this.is_open_socket=!1,console.log("websocket关闭成功",t)},fail:function(t){console.log("websocket关闭失败",t)}})},clickRequest:function(){if(this.is_open_socket){this.is_init=!1,this.is_matching=!0;var t='match={"openid":"'+this.openid+'","nickname":"'+this.username+'"}';this.socketTask.send({data:t,success:function(){var t=i(o.default.mark(function t(e){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})}},confirmnumber:function(){if(this.mya=this.myina,this.myb=this.myinb,this.is_round=!this.is_round,console.log(this.mya+" "+this.myb),this.mya==this.result||this.myb==this.result){var t='win={"openid":"'+this.openid+'"}';this.socketTask.send({data:t,success:function(){var t=i(o.default.mark(function t(e){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})}else{var e='number={"openid":"'+this.otherUserOpenId+'","numbera":"'+this.mya+'","numberb":"'+this.myb+'"}';this.socketTask.send({data:e,success:function(){var t=i(o.default.mark(function t(e){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})}},inputA:function(t){this.myina=t.target.value},inputB:function(t){this.myinb=t.target.value},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null}}};e.default=s}).call(this,n("543d")["default"])},8189:function(t,e,n){"use strict";n.r(e);var o=n("1fde"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},aa19:function(t,e,n){"use strict";n.r(e);var o=n("643f"),a=n("11c1");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var u=n("2877"),i=Object(u["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=i.exports},aef8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{}},methods:{}};e.default=o},b482:function(t,e,n){"use strict";var o=n("2da9"),a=n.n(o);a.a},c926:function(t,e,n){"use strict";n.r(e);var o=n("df4d"),a=n("f750");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var u=n("2877"),i=Object(u["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=i.exports},cc4a:function(t,e,n){"use strict";n.r(e);var o=n("8189");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("b482");var r,u,i=n("2877"),s=Object(i["a"])(o["default"],r,u,!1,null,null,null);e["default"]=s.exports},cea4:function(t,e,n){"use strict";(function(t){n("3300"),n("921b");var e=s(n("66fd")),o=s(n("cc4a")),a=s(n("2fad")),r=s(n("c926")),u=s(n("aa19")),i=s(n("5d6b"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default.component("game",r.default),e.default.component("rank",u.default),e.default.component("user",i.default),e.default.config.productionTip=!1,e.default.prototype.$store=a.default,o.default.mpType="app";var f=new e.default(c({store:a.default},o.default));t(f).$mount()}).call(this,n("543d")["createApp"])},dc12:function(t,e,n){"use strict";n.r(e);var o=n("68e9"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},df4d:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},f750:function(t,e,n){"use strict";n.r(e);var o=n("774e"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},f76f:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})}},[["cea4","common/runtime","common/vendor"]]]);